{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Button}from\"./ui/button\";import{Badge}from\"./ui/badge\";import{Card,CardContent}from\"./ui/card\";import{Heart,ShoppingCart,Star,ChevronLeft,ChevronRight}from\"lucide-react\";import{ImageWithFallback}from\"./figma/ImageWithFallback\";import{useSeller}from\"../contexts/seller-context\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export function ProductCard(_ref){let{product,onAddToCart,onToggleWishlist,isInWishlist,onProductClick}=_ref;const[isHovered,setIsHovered]=useState(false);const[currentImageIndex,setCurrentImageIndex]=useState(0);const[selectedColor,setSelectedColor]=useState(null);const[showColorPicker,setShowColorPicker]=useState(false);const{products:sellerProducts}=useSeller();const discountPercentage=product.originalPrice?Math.round((product.originalPrice-product.price)/product.originalPrice*100):0;// Get available colors for this product\nconst sellerProduct=sellerProducts.find(p=>p.id===product.id);const availableColors=(sellerProduct===null||sellerProduct===void 0?void 0:sellerProduct.availableColors)||[];const hasColors=availableColors.length>0;// Get images for the selected color variant, or fall back to default images\nconst getImagesForColor=color=>{if(!color||!sellerProduct){return product.images&&product.images.length>0?product.images:[product.image];}// Find a variant with this color that has images\nconst variantWithImages=sellerProduct.variants.find(v=>v.color===color&&v.images&&v.images.length>0);if(variantWithImages!==null&&variantWithImages!==void 0&&variantWithImages.images){return variantWithImages.images;}// Fall back to default product images\nreturn product.images&&product.images.length>0?product.images:[product.image];};const allImages=getImagesForColor(selectedColor);const hasMultipleImages=allImages.length>1;// Auto-advance slideshow when hovered\nuseEffect(()=>{if(!isHovered||!hasMultipleImages)return;const interval=setInterval(()=>{setCurrentImageIndex(prev=>(prev+1)%allImages.length);},2000);return()=>clearInterval(interval);},[isHovered,hasMultipleImages,allImages.length]);// Reset image index when color changes\nuseEffect(()=>{setCurrentImageIndex(0);},[selectedColor]);// Set default color when component mounts\nuseEffect(()=>{if(availableColors.length>0&&!selectedColor){setSelectedColor(availableColors[0]);}},[availableColors,selectedColor]);const handlePrevImage=e=>{e.stopPropagation();setCurrentImageIndex(prev=>(prev-1+allImages.length)%allImages.length);};const handleNextImage=e=>{e.stopPropagation();setCurrentImageIndex(prev=>(prev+1)%allImages.length);};const handleAddToCart=e=>{e.stopPropagation();if(hasColors&&!selectedColor){setShowColorPicker(true);return;}onAddToCart(product,selectedColor||undefined);setShowColorPicker(false);};const handleColorSelect=(e,color)=>{e.stopPropagation();setSelectedColor(color);};return/*#__PURE__*/_jsx(Card,{className:\"group cursor-card transition-all duration-300 hover-lift border-0 shadow-sm hover-glow animate-fade-in\",onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>{setIsHovered(false);setShowColorPicker(false);},onClick:()=>onProductClick===null||onProductClick===void 0?void 0:onProductClick(product),children:/*#__PURE__*/_jsxs(CardContent,{className:\"p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative overflow-hidden rounded-t-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-48 md:h-64\",children:[/*#__PURE__*/_jsx(ImageWithFallback,{src:allImages[currentImageIndex],alt:\"\".concat(product.name).concat(selectedColor?\" - \".concat(selectedColor):'',\" - Image \").concat(currentImageIndex+1),className:\"w-full h-48 md:h-64 object-cover transition-all duration-500 cursor-zoom\"}),hasMultipleImages&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",className:\"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-200 \".concat(isHovered?'opacity-100':'opacity-0',\" bg-background/80 hover:bg-background/90 cursor-button\"),onClick:handlePrevImage,children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",className:\"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-200 \".concat(isHovered?'opacity-100':'opacity-0',\" bg-background/80 hover:bg-background/90 cursor-button\"),onClick:handleNextImage,children:/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1\",children:allImages.map((_,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"h-1.5 rounded-full transition-all duration-300 cursor-button \".concat(index===currentImageIndex?'w-6 bg-white':'w-1.5 bg-white/50'),onClick:e=>{e.stopPropagation();setCurrentImageIndex(index);}},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 left-2 flex flex-col gap-2\",children:[product.isNew&&/*#__PURE__*/_jsx(Badge,{variant:\"destructive\",className:\"text-xs animate-scale-in\",children:\"New\"}),product.isOnSale&&discountPercentage>0&&/*#__PURE__*/_jsxs(Badge,{variant:\"secondary\",className:\"text-xs animate-scale-in\",children:[\"-\",discountPercentage,\"%\"]})]}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",className:\"absolute top-2 right-2 transition-all duration-200 cursor-button hover-scale \".concat(isHovered?'opacity-100':'opacity-0',\" hover:bg-background/80\"),onClick:e=>{e.stopPropagation();onToggleWishlist(product.id);},children:/*#__PURE__*/_jsx(Heart,{className:\"h-4 w-4 \".concat(isInWishlist?'fill-red-500 text-red-500':'text-muted-foreground')})}),showColorPicker&&hasColors&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 bg-white dark:bg-neutral-900 flex flex-col items-center justify-center gap-3 animate-fade-in\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Select a color:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 flex-wrap justify-center px-4\",children:availableColors.map(color=>/*#__PURE__*/_jsx(\"button\",{onClick:e=>{handleColorSelect(e,color);onAddToCart(product,color);setShowColorPicker(false);},className:\"px-3 py-1.5 rounded-md text-xs transition-all cursor-button hover-scale \".concat(selectedColor===color?'bg-primary text-primary-foreground':'bg-secondary text-secondary-foreground hover:bg-primary/10'),children:color},color))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-2 right-2 transition-all duration-200 \".concat(isHovered?'opacity-100 translate-y-0':'opacity-0 translate-y-2'),children:hasColors?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 justify-center\",children:[availableColors.slice(0,5).map(color=>/*#__PURE__*/_jsx(\"button\",{onClick:e=>handleColorSelect(e,color),className:\"w-6 h-6 rounded-full border-2 transition-all cursor-button hover-scale \".concat(selectedColor===color?'border-white scale-110':'border-white/50 hover:border-white'),style:{backgroundColor:color.toLowerCase()==='black'?'#000':color.toLowerCase()==='white'?'#fff':color.toLowerCase()==='blue'?'#3b82f6':color.toLowerCase()==='red'?'#ef4444':color.toLowerCase()==='green'?'#22c55e':color.toLowerCase()==='gray'||color.toLowerCase()==='grey'?'#6b7280':color.toLowerCase()==='brown'?'#92400e':color.toLowerCase()==='navy'?'#1e3a8a':color.toLowerCase()==='beige'?'#d4b5a0':'#888'},title:color},color)),availableColors.length>5&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-white bg-black/50 px-2 py-1 rounded\",children:[\"+\",availableColors.length-5]})]}),/*#__PURE__*/_jsxs(Button,{className:\"w-full cursor-button pulse-on-hover\",onClick:handleAddToCart,children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-4 w-4 mr-2\"}),\"Add to Cart\"]})]}):/*#__PURE__*/_jsxs(Button,{className:\"w-full cursor-button pulse-on-hover\",onClick:handleAddToCart,children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-4 w-4 mr-2\"}),\"Add to Cart\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted-foreground mb-1\",children:product.category}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-2 line-clamp-2 cursor-link\",children:product.name}),product.averageRating&&product.reviews&&product.reviews.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(Star,{className:\"h-3 w-3 \".concat(star<=Math.round(product.averageRating)?'fill-yellow-400 text-yellow-400':'text-gray-300')},star))}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-muted-foreground\",children:[\"(\",product.reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[\"$\",product.price.toFixed(2)]}),product.originalPrice&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-muted-foreground line-through\",children:[\"$\",product.originalPrice.toFixed(2)]})]}),hasColors&&selectedColor&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(Badge,{variant:\"outline\",className:\"text-xs\",children:selectedColor})})]})]})});}","map":{"version":3,"names":["useState","useEffect","Button","Badge","Card","CardContent","Heart","ShoppingCart","Star","ChevronLeft","ChevronRight","ImageWithFallback","useSeller","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProductCard","_ref","product","onAddToCart","onToggleWishlist","isInWishlist","onProductClick","isHovered","setIsHovered","currentImageIndex","setCurrentImageIndex","selectedColor","setSelectedColor","showColorPicker","setShowColorPicker","products","sellerProducts","discountPercentage","originalPrice","Math","round","price","sellerProduct","find","p","id","availableColors","hasColors","length","getImagesForColor","color","images","image","variantWithImages","variants","v","allImages","hasMultipleImages","interval","setInterval","prev","clearInterval","handlePrevImage","e","stopPropagation","handleNextImage","handleAddToCart","undefined","handleColorSelect","className","onMouseEnter","onMouseLeave","onClick","children","src","alt","concat","name","variant","size","map","_","index","isNew","isOnSale","slice","style","backgroundColor","toLowerCase","title","category","averageRating","reviews","star","toFixed"],"sources":["D:/JHFshop/src/components/product-card.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Card, CardContent } from \"./ui/card\";\r\nimport { Heart, ShoppingCart, Star, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { ImageWithFallback } from \"./figma/ImageWithFallback\";\r\nimport { Review } from \"./product-reviews\";\r\nimport { useSeller } from \"../contexts/seller-context\";\r\n\r\nexport interface Product {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  originalPrice?: number;\r\n  image: string;\r\n  images?: string[]; // Multiple product images for slideshow\r\n  category: string;\r\n  isNew?: boolean;\r\n  isOnSale?: boolean;\r\n  reviews?: Review[];\r\n  averageRating?: number;\r\n  description?: string;\r\n}\r\n\r\ninterface ProductCardProps {\r\n  product: Product;\r\n  onAddToCart: (product: Product, color?: string, size?: string) => void;\r\n  onToggleWishlist: (productId: string) => void;\r\n  isInWishlist: boolean;\r\n  onProductClick?: (product: Product) => void;\r\n}\r\n\r\nexport function ProductCard({ product, onAddToCart, onToggleWishlist, isInWishlist, onProductClick }: ProductCardProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [selectedColor, setSelectedColor] = useState<string | null>(null);\r\n  const [showColorPicker, setShowColorPicker] = useState(false);\r\n  const { products: sellerProducts } = useSeller();\r\n\r\n  const discountPercentage = product.originalPrice \r\n    ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)\r\n    : 0;\r\n\r\n  // Get available colors for this product\r\n  const sellerProduct = sellerProducts.find(p => p.id === product.id);\r\n  const availableColors = sellerProduct?.availableColors || [];\r\n  const hasColors = availableColors.length > 0;\r\n\r\n  // Get images for the selected color variant, or fall back to default images\r\n  const getImagesForColor = (color: string | null) => {\r\n    if (!color || !sellerProduct) {\r\n      return product.images && product.images.length > 0 ? product.images : [product.image];\r\n    }\r\n    \r\n    // Find a variant with this color that has images\r\n    const variantWithImages = sellerProduct.variants.find(v => \r\n      v.color === color && v.images && v.images.length > 0\r\n    );\r\n    \r\n    if (variantWithImages?.images) {\r\n      return variantWithImages.images;\r\n    }\r\n    \r\n    // Fall back to default product images\r\n    return product.images && product.images.length > 0 ? product.images : [product.image];\r\n  };\r\n\r\n  const allImages = getImagesForColor(selectedColor);\r\n  const hasMultipleImages = allImages.length > 1;\r\n\r\n  // Auto-advance slideshow when hovered\r\n  useEffect(() => {\r\n    if (!isHovered || !hasMultipleImages) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setCurrentImageIndex((prev) => (prev + 1) % allImages.length);\r\n    }, 2000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isHovered, hasMultipleImages, allImages.length]);\r\n\r\n  // Reset image index when color changes\r\n  useEffect(() => {\r\n    setCurrentImageIndex(0);\r\n  }, [selectedColor]);\r\n\r\n  // Set default color when component mounts\r\n  useEffect(() => {\r\n    if (availableColors.length > 0 && !selectedColor) {\r\n      setSelectedColor(availableColors[0]);\r\n    }\r\n  }, [availableColors, selectedColor]);\r\n\r\n  const handlePrevImage = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex((prev) => (prev - 1 + allImages.length) % allImages.length);\r\n  };\r\n\r\n  const handleNextImage = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex((prev) => (prev + 1) % allImages.length);\r\n  };\r\n\r\n  const handleAddToCart = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    if (hasColors && !selectedColor) {\r\n      setShowColorPicker(true);\r\n      return;\r\n    }\r\n    onAddToCart(product, selectedColor || undefined);\r\n    setShowColorPicker(false);\r\n  };\r\n\r\n  const handleColorSelect = (e: React.MouseEvent, color: string) => {\r\n    e.stopPropagation();\r\n    setSelectedColor(color);\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      className=\"group cursor-card transition-all duration-300 hover-lift border-0 shadow-sm hover-glow animate-fade-in\"\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => {\r\n        setIsHovered(false);\r\n        setShowColorPicker(false);\r\n      }}\r\n      onClick={() => onProductClick?.(product)}\r\n    >\r\n      <CardContent className=\"p-0\">\r\n        <div className=\"relative overflow-hidden rounded-t-lg\">\r\n          {/* Image Slideshow */}\r\n          <div className=\"relative w-full h-48 md:h-64\">\r\n            <ImageWithFallback\r\n              src={allImages[currentImageIndex]}\r\n              alt={`${product.name}${selectedColor ? ` - ${selectedColor}` : ''} - Image ${currentImageIndex + 1}`}\r\n              className=\"w-full h-48 md:h-64 object-cover transition-all duration-500 cursor-zoom\"\r\n            />\r\n            \r\n            {/* Slideshow Navigation - Only show if multiple images */}\r\n            {hasMultipleImages && (\r\n              <>\r\n                {/* Previous Button */}\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className={`absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-200 ${\r\n                    isHovered ? 'opacity-100' : 'opacity-0'\r\n                  } bg-background/80 hover:bg-background/90 cursor-button`}\r\n                  onClick={handlePrevImage}\r\n                >\r\n                  <ChevronLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n\r\n                {/* Next Button */}\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className={`absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-200 ${\r\n                    isHovered ? 'opacity-100' : 'opacity-0'\r\n                  } bg-background/80 hover:bg-background/90 cursor-button`}\r\n                  onClick={handleNextImage}\r\n                >\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </Button>\r\n\r\n                {/* Image Indicators */}\r\n                <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1\">\r\n                  {allImages.map((_, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className={`h-1.5 rounded-full transition-all duration-300 cursor-button ${\r\n                        index === currentImageIndex\r\n                          ? 'w-6 bg-white'\r\n                          : 'w-1.5 bg-white/50'\r\n                      }`}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setCurrentImageIndex(index);\r\n                      }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Badges */}\r\n          <div className=\"absolute top-2 left-2 flex flex-col gap-2\">\r\n            {product.isNew && (\r\n              <Badge variant=\"destructive\" className=\"text-xs animate-scale-in\">New</Badge>\r\n            )}\r\n            {product.isOnSale && discountPercentage > 0 && (\r\n              <Badge variant=\"secondary\" className=\"text-xs animate-scale-in\">-{discountPercentage}%</Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Wishlist Button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className={`absolute top-2 right-2 transition-all duration-200 cursor-button hover-scale ${\r\n              isHovered ? 'opacity-100' : 'opacity-0'\r\n            } hover:bg-background/80`}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onToggleWishlist(product.id);\r\n            }}\r\n          >\r\n            <Heart \r\n              className={`h-4 w-4 ${isInWishlist ? 'fill-red-500 text-red-500' : 'text-muted-foreground'}`} \r\n            />\r\n          </Button>\r\n\r\n          {/* Color Picker Overlay */}\r\n          {showColorPicker && hasColors && (\r\n            <div \r\n              className=\"absolute inset-0 bg-white dark:bg-neutral-900 flex flex-col items-center justify-center gap-3 animate-fade-in\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <p className=\"text-sm font-medium\">Select a color:</p>\r\n              <div className=\"flex gap-2 flex-wrap justify-center px-4\">\r\n                {availableColors.map((color) => (\r\n                  <button\r\n                    key={color}\r\n                    onClick={(e) => {\r\n                      handleColorSelect(e, color);\r\n                      onAddToCart(product, color);\r\n                      setShowColorPicker(false);\r\n                    }}\r\n                    className={`px-3 py-1.5 rounded-md text-xs transition-all cursor-button hover-scale ${\r\n                      selectedColor === color\r\n                        ? 'bg-primary text-primary-foreground'\r\n                        : 'bg-secondary text-secondary-foreground hover:bg-primary/10'\r\n                    }`}\r\n                  >\r\n                    {color}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Add to Cart Button / Color Selection */}\r\n          <div className={`absolute bottom-2 left-2 right-2 transition-all duration-200 ${\r\n            isHovered ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'\r\n          }`}>\r\n            {hasColors ? (\r\n              <div className=\"space-y-2\">\r\n                {/* Color selector */}\r\n                <div className=\"flex gap-1 justify-center\">\r\n                  {availableColors.slice(0, 5).map((color) => (\r\n                    <button\r\n                      key={color}\r\n                      onClick={(e) => handleColorSelect(e, color)}\r\n                      className={`w-6 h-6 rounded-full border-2 transition-all cursor-button hover-scale ${\r\n                        selectedColor === color\r\n                          ? 'border-white scale-110'\r\n                          : 'border-white/50 hover:border-white'\r\n                      }`}\r\n                      style={{\r\n                        backgroundColor: color.toLowerCase() === 'black' ? '#000' :\r\n                                        color.toLowerCase() === 'white' ? '#fff' :\r\n                                        color.toLowerCase() === 'blue' ? '#3b82f6' :\r\n                                        color.toLowerCase() === 'red' ? '#ef4444' :\r\n                                        color.toLowerCase() === 'green' ? '#22c55e' :\r\n                                        color.toLowerCase() === 'gray' || color.toLowerCase() === 'grey' ? '#6b7280' :\r\n                                        color.toLowerCase() === 'brown' ? '#92400e' :\r\n                                        color.toLowerCase() === 'navy' ? '#1e3a8a' :\r\n                                        color.toLowerCase() === 'beige' ? '#d4b5a0' : '#888'\r\n                      }}\r\n                      title={color}\r\n                    />\r\n                  ))}\r\n                  {availableColors.length > 5 && (\r\n                    <span className=\"text-xs text-white bg-black/50 px-2 py-1 rounded\">\r\n                      +{availableColors.length - 5}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <Button \r\n                  className=\"w-full cursor-button pulse-on-hover\" \r\n                  onClick={handleAddToCart}\r\n                >\r\n                  <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                  Add to Cart\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <Button \r\n                className=\"w-full cursor-button pulse-on-hover\" \r\n                onClick={handleAddToCart}\r\n              >\r\n                <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                Add to Cart\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4\">\r\n          <p className=\"text-sm text-muted-foreground mb-1\">{product.category}</p>\r\n          <h3 className=\"font-medium mb-2 line-clamp-2 cursor-link\">{product.name}</h3>\r\n          \r\n          {/* Rating */}\r\n          {product.averageRating && product.reviews && product.reviews.length > 0 && (\r\n            <div className=\"flex items-center gap-1 mb-2\">\r\n              <div className=\"flex items-center\">\r\n                {[1, 2, 3, 4, 5].map((star) => (\r\n                  <Star\r\n                    key={star}\r\n                    className={`h-3 w-3 ${\r\n                      star <= Math.round(product.averageRating!)\r\n                        ? 'fill-yellow-400 text-yellow-400'\r\n                        : 'text-gray-300'\r\n                    }`}\r\n                  />\r\n                ))}\r\n              </div>\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                ({product.reviews.length})\r\n              </span>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"font-semibold\">${product.price.toFixed(2)}</span>\r\n            {product.originalPrice && (\r\n              <span className=\"text-sm text-muted-foreground line-through\">\r\n                ${product.originalPrice.toFixed(2)}\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Selected color indicator */}\r\n          {hasColors && selectedColor && (\r\n            <div className=\"mt-2\">\r\n              <Badge variant=\"outline\" className=\"text-xs\">\r\n                {selectedColor}\r\n              </Badge>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}