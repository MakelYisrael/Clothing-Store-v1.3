{"ast":null,"code":"import _objectSpread from\"D:/JHFshop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{Card,CardContent,CardHeader,CardTitle}from\"./ui/card\";import{Input}from\"./ui/input\";import{Button}from\"./ui/button\";import{Badge}from\"./ui/badge\";import{Table,TableBody,TableCell,TableHead,TableHeader,TableRow}from\"./ui/table\";import{Select,SelectContent,SelectItem,SelectTrigger,SelectValue}from\"./ui/select\";import{Checkbox}from\"./ui/checkbox\";import{Search,Package,AlertTriangle,CheckCircle,Edit2,Save,X,Layers}from\"lucide-react\";import{useSeller}from\"../contexts/seller-context\";import{toast}from\"sonner\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function InventoryManagement(){const{products,updateVariantStock,bulkUpdateVariantStock}=useSeller();const[searchQuery,setSearchQuery]=useState('');const[selectedCategory,setSelectedCategory]=useState('all');const[selectedStockStatus,setSelectedStockStatus]=useState('all');const[editingVariant,setEditingVariant]=useState(null);const categories=Array.from(new Set(products.map(p=>p.category)));const[selectedColor,setSelectedColor]=useState('all');const[selectedSize,setSelectedSize]=useState('all');const allColors=Array.from(new Set(products.flatMap(p=>p.availableColors)));const allSizes=Array.from(new Set(products.flatMap(p=>p.availableSizes)));// Bulk update state\nconst[bulkMode,setBulkMode]=useState(false);const[selectedVariants,setSelectedVariants]=useState(new Set());const[bulkStockValue,setBulkStockValue]=useState(0);const[bulkAction,setBulkAction]=useState('set');const filteredProducts=products.filter(product=>{const matchesSearch=product.name.toLowerCase().includes(searchQuery.toLowerCase())||product.id.toLowerCase().includes(searchQuery.toLowerCase());const matchesCategory=selectedCategory==='all'||product.category===selectedCategory;const matchesColor=selectedColor==='all'||product.availableColors.includes(selectedColor);const matchesSize=selectedSize==='all'||product.availableSizes.includes(selectedSize);// Stock status filter - check if any variant matches the selected status\nlet matchesStockStatus=true;if(selectedStockStatus!=='all'){const hasMatchingVariant=product.variants.some(variant=>{if(selectedStockStatus==='out-of-stock')return variant.stock===0;if(selectedStockStatus==='low-stock')return variant.stock<10&&variant.stock>0;if(selectedStockStatus==='in-stock')return variant.stock>=10;return true;});matchesStockStatus=hasMatchingVariant;}return matchesSearch&&matchesCategory&&matchesColor&&matchesSize&&matchesStockStatus;});const getStockStatus=stock=>{if(stock===0)return{label:'Out of Stock',variant:'destructive',icon:AlertTriangle};if(stock<10)return{label:'Low Stock',variant:'secondary',icon:AlertTriangle};return{label:'In Stock',variant:'default',icon:CheckCircle};};const handleEditStock=(productId,variantId,currentStock)=>{setEditingVariant({productId,variantId,stock:currentStock});};const handleSaveStock=()=>{if(editingVariant){updateVariantStock(editingVariant.productId,editingVariant.variantId,editingVariant.stock);toast.success('Stock updated successfully');setEditingVariant(null);}};const handleCancelEdit=()=>{setEditingVariant(null);};// Bulk update handlers\nconst handleToggleVariant=(productId,variantId)=>{const key=\"\".concat(productId,\"-\").concat(variantId);setSelectedVariants(prev=>{const newSet=new Set(prev);if(newSet.has(key)){newSet.delete(key);}else{newSet.add(key);}return newSet;});};const handleSelectAll=()=>{const allVariantKeys=new Set();filteredProducts.forEach(product=>{product.variants.filter(variant=>selectedColor==='all'||variant.color===selectedColor).filter(variant=>selectedSize==='all'||variant.size===selectedSize).forEach(variant=>{allVariantKeys.add(\"\".concat(product.id,\"-\").concat(variant.id));});});setSelectedVariants(allVariantKeys);};const handleDeselectAll=()=>{setSelectedVariants(new Set());};const handleBulkUpdate=()=>{if(selectedVariants.size===0){toast.error('Please select at least one variant');return;}const updates=[];selectedVariants.forEach(key=>{const[productId,variantId]=key.split('-');const product=products.find(p=>p.id===productId);const variant=product===null||product===void 0?void 0:product.variants.find(v=>v.id===variantId);if(variant){let newStock=variant.stock;switch(bulkAction){case'set':newStock=bulkStockValue;break;case'increase':newStock=variant.stock+bulkStockValue;break;case'decrease':newStock=Math.max(0,variant.stock-bulkStockValue);break;}updates.push({productId,variantId,stock:newStock});}});bulkUpdateVariantStock(updates);toast.success(\"Updated \".concat(updates.length,\" variant\").concat(updates.length>1?'s':'',\" successfully\"));setSelectedVariants(new Set());setBulkMode(false);};const totalInventoryValue=products.reduce((sum,product)=>sum+product.totalStock*product.price,0);const totalItems=products.reduce((sum,product)=>sum+product.totalStock,0);const lowStockItems=products.reduce((sum,product)=>sum+product.variants.filter(v=>v.stock<10&&v.stock>0).length,0);const outOfStockItems=products.reduce((sum,product)=>sum+product.variants.filter(v=>v.stock===0).length,0);// Get low stock items grouped by color\nconst getLowStockByColor=()=>{const lowStockByColor={};products.forEach(product=>{product.variants.forEach(variant=>{if(variant.stock<10&&variant.stock>0){if(!lowStockByColor[variant.color]){lowStockByColor[variant.color]=[];}lowStockByColor[variant.color].push({productName:product.name,size:variant.size,stock:variant.stock});}});});return lowStockByColor;};const lowStockByColor=getLowStockByColor();return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 md:space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\",children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"pb-2 md:pb-3\",children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-xs md:text-sm truncate\",children:\"Total Inventory Value\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg md:text-2xl font-bold\",children:[\"$\",totalInventoryValue.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-muted-foreground mt-1\",children:[totalItems,\" total items\"]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"pb-2 md:pb-3\",children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-xs md:text-sm\",children:\"Products\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg md:text-2xl font-bold\",children:products.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-muted-foreground mt-1\",children:\"Active products\"})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"pb-2 md:pb-3\",children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-xs md:text-sm truncate\",children:\"Low Stock Alert\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg md:text-2xl font-bold text-orange-600\",children:lowStockItems}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-muted-foreground mt-1\",children:\"Variants below 10 units\"})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"pb-2 md:pb-3\",children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-xs md:text-sm truncate\",children:\"Out of Stock\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg md:text-2xl font-bold text-destructive\",children:outOfStockItems}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-muted-foreground mt-1\",children:\"Variants to restock\"})]})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center gap-2 text-base md:text-lg\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-4 h-4 md:w-5 md:h-5\"}),\"Inventory Details\"]})}),/*#__PURE__*/_jsxs(CardContent,{className:\"space-y-3 md:space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 md:space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2 md:gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Search by product name or ID...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"pl-10\"})]}),/*#__PURE__*/_jsxs(Select,{value:selectedCategory,onValueChange:setSelectedCategory,children:[/*#__PURE__*/_jsx(SelectTrigger,{className:\"w-full sm:w-[180px]\",children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"All Categories\"})}),/*#__PURE__*/_jsxs(SelectContent,{children:[/*#__PURE__*/_jsx(SelectItem,{value:\"all\",children:\"All Categories\"}),categories.map(cat=>/*#__PURE__*/_jsx(SelectItem,{value:cat,children:cat},cat))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2 md:gap-4\",children:[/*#__PURE__*/_jsxs(Select,{value:selectedColor,onValueChange:setSelectedColor,children:[/*#__PURE__*/_jsx(SelectTrigger,{className:\"w-full sm:w-[130px]\",children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"All Colors\"})}),/*#__PURE__*/_jsxs(SelectContent,{children:[/*#__PURE__*/_jsx(SelectItem,{value:\"all\",children:\"All Colors\"}),allColors.map(color=>/*#__PURE__*/_jsx(SelectItem,{value:color,children:color},color))]})]}),/*#__PURE__*/_jsxs(Select,{value:selectedSize,onValueChange:setSelectedSize,children:[/*#__PURE__*/_jsx(SelectTrigger,{className:\"w-[130px]\",children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"All Sizes\"})}),/*#__PURE__*/_jsxs(SelectContent,{children:[/*#__PURE__*/_jsx(SelectItem,{value:\"all\",children:\"All Sizes\"}),allSizes.map(size=>/*#__PURE__*/_jsx(SelectItem,{value:size,children:size},size))]})]}),/*#__PURE__*/_jsxs(Select,{value:selectedStockStatus,onValueChange:setSelectedStockStatus,children:[/*#__PURE__*/_jsx(SelectTrigger,{className:\"w-full sm:w-[180px]\",children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"Stock Status\"})}),/*#__PURE__*/_jsxs(SelectContent,{children:[/*#__PURE__*/_jsx(SelectItem,{value:\"all\",children:\"All Stock Levels\"}),/*#__PURE__*/_jsx(SelectItem,{value:\"out-of-stock\",children:\"Out of Stock\"}),/*#__PURE__*/_jsx(SelectItem,{value:\"low-stock\",children:\"Low Stock (< 10)\"}),/*#__PURE__*/_jsx(SelectItem,{value:\"in-stock\",children:\"In Stock\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(Button,{variant:bulkMode?\"default\":\"outline\",size:\"sm\",onClick:()=>{setBulkMode(!bulkMode);if(bulkMode){setSelectedVariants(new Set());}},className:\"gap-2\",children:[/*#__PURE__*/_jsx(Layers,{className:\"w-4 h-4\"}),bulkMode?'Exit Bulk Mode':'Bulk Update']}),bulkMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:handleSelectAll,children:\"Select All\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",onClick:handleDeselectAll,children:\"Deselect All\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 ml-auto\",children:[/*#__PURE__*/_jsxs(Select,{value:bulkAction,onValueChange:v=>setBulkAction(v),children:[/*#__PURE__*/_jsx(SelectTrigger,{className:\"w-[140px]\",children:/*#__PURE__*/_jsx(SelectValue,{})}),/*#__PURE__*/_jsxs(SelectContent,{children:[/*#__PURE__*/_jsx(SelectItem,{value:\"set\",children:\"Set to\"}),/*#__PURE__*/_jsx(SelectItem,{value:\"increase\",children:\"Increase by\"}),/*#__PURE__*/_jsx(SelectItem,{value:\"decrease\",children:\"Decrease by\"})]})]}),/*#__PURE__*/_jsx(Input,{type:\"number\",min:\"0\",value:bulkStockValue,onChange:e=>setBulkStockValue(parseInt(e.target.value)||0),className:\"w-24\",placeholder:\"0\"}),/*#__PURE__*/_jsxs(Button,{onClick:handleBulkUpdate,disabled:selectedVariants.size===0,size:\"sm\",children:[\"Apply (\",selectedVariants.size,\")\"]})]})]})]})]}),Object.keys(lowStockByColor).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-900 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-orange-900 dark:text-orange-100 mb-2\",children:\"Low Stock Alert by Color\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(lowStockByColor).map(_ref=>{let[color,items]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-orange-800 dark:text-orange-200\",children:[color,\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 space-y-1\",children:items.map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-orange-700 dark:text-orange-300\",children:[\"\\u2022 \",item.productName,\" (\",item.size,\") - \",item.stock,\" units remaining\"]},idx))})]},color);})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg\",children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(TableRow,{children:[bulkMode&&/*#__PURE__*/_jsx(TableHead,{className:\"w-12\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Product\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Category\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Color\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Size\"}),/*#__PURE__*/_jsx(TableHead,{children:\"SKU\"}),/*#__PURE__*/_jsx(TableHead,{className:\"text-right\",children:\"Stock\"}),/*#__PURE__*/_jsx(TableHead,{children:\"Status\"}),/*#__PURE__*/_jsx(TableHead,{className:\"text-right\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredProducts.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:bulkMode?9:8,className:\"text-center text-muted-foreground py-8\",children:\"No products found\"})}):filteredProducts.flatMap(product=>product.variants// Filter variants by selected color and size\n.filter(variant=>selectedColor==='all'||variant.color===selectedColor).filter(variant=>selectedSize==='all'||variant.size===selectedSize)// Filter variants by stock status\n.filter(variant=>{if(selectedStockStatus==='all')return true;if(selectedStockStatus==='out-of-stock')return variant.stock===0;if(selectedStockStatus==='low-stock')return variant.stock<10&&variant.stock>0;if(selectedStockStatus==='in-stock')return variant.stock>=10;return true;}).map(variant=>{const status=getStockStatus(variant.stock);const StatusIcon=status.icon;const isEditing=(editingVariant===null||editingVariant===void 0?void 0:editingVariant.productId)===product.id&&(editingVariant===null||editingVariant===void 0?void 0:editingVariant.variantId)===variant.id;const variantKey=\"\".concat(product.id,\"-\").concat(variant.id);const isSelected=selectedVariants.has(variantKey);return/*#__PURE__*/_jsxs(TableRow,{children:[bulkMode&&/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{checked:isSelected,onCheckedChange:()=>handleToggleVariant(product.id,variant.id)})}),/*#__PURE__*/_jsx(TableCell,{className:\"font-medium\",children:product.name}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Badge,{variant:\"outline\",children:product.category})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",children:variant.color})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Badge,{variant:\"outline\",children:variant.size})}),/*#__PURE__*/_jsx(TableCell,{className:\"text-muted-foreground\",children:variant.sku||'-'}),/*#__PURE__*/_jsx(TableCell,{className:\"text-right\",children:isEditing?/*#__PURE__*/_jsx(Input,{type:\"number\",value:editingVariant.stock,onChange:e=>setEditingVariant(_objectSpread(_objectSpread({},editingVariant),{},{stock:parseInt(e.target.value)||0})),className:\"w-20 text-right\",autoFocus:true}):/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:variant.stock})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Badge,{variant:status.variant,className:\"gap-1\",children:[/*#__PURE__*/_jsx(StatusIcon,{className:\"w-3 h-3\"}),status.label]})}),/*#__PURE__*/_jsx(TableCell,{className:\"text-right\",children:!bulkMode&&/*#__PURE__*/_jsx(_Fragment,{children:isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:handleSaveStock,children:/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:handleCancelEdit,children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}):/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:()=>handleEditStock(product.id,variant.id,variant.stock),children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})})})})]},variantKey);}))})]})})]})]})]});}","map":{"version":3,"names":["useState","Card","CardContent","CardHeader","CardTitle","Input","Button","Badge","Table","TableBody","TableCell","TableHead","TableHeader","TableRow","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","Checkbox","Search","Package","AlertTriangle","CheckCircle","Edit2","Save","X","Layers","useSeller","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InventoryManagement","products","updateVariantStock","bulkUpdateVariantStock","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","selectedStockStatus","setSelectedStockStatus","editingVariant","setEditingVariant","categories","Array","from","Set","map","p","category","selectedColor","setSelectedColor","selectedSize","setSelectedSize","allColors","flatMap","availableColors","allSizes","availableSizes","bulkMode","setBulkMode","selectedVariants","setSelectedVariants","bulkStockValue","setBulkStockValue","bulkAction","setBulkAction","filteredProducts","filter","product","matchesSearch","name","toLowerCase","includes","id","matchesCategory","matchesColor","matchesSize","matchesStockStatus","hasMatchingVariant","variants","some","variant","stock","getStockStatus","label","icon","handleEditStock","productId","variantId","currentStock","handleSaveStock","success","handleCancelEdit","handleToggleVariant","key","concat","prev","newSet","has","delete","add","handleSelectAll","allVariantKeys","forEach","color","size","handleDeselectAll","handleBulkUpdate","error","updates","split","find","v","newStock","Math","max","push","length","totalInventoryValue","reduce","sum","totalStock","price","totalItems","lowStockItems","outOfStockItems","getLowStockByColor","lowStockByColor","productName","className","children","toFixed","placeholder","value","onChange","e","target","onValueChange","cat","onClick","type","min","parseInt","disabled","Object","keys","entries","_ref","items","item","idx","colSpan","status","StatusIcon","isEditing","variantKey","isSelected","checked","onCheckedChange","sku","_objectSpread","autoFocus"],"sources":["D:/JHFshop/src/components/inventory-management.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\r\nimport { Input } from \"./ui/input\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"./ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"./ui/select\";\r\nimport { Checkbox } from \"./ui/checkbox\";\r\nimport { Search, Package, AlertTriangle, CheckCircle, Edit2, Save, X, Layers } from \"lucide-react\";\r\nimport { ProductWithInventory, useSeller } from \"../contexts/seller-context\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport function InventoryManagement() {\r\n  const { products, updateVariantStock, bulkUpdateVariantStock } = useSeller();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n  const [selectedStockStatus, setSelectedStockStatus] = useState<string>('all');\r\n  const [editingVariant, setEditingVariant] = useState<{ productId: string; variantId: string; stock: number } | null>(null);\r\n\r\n  const categories = Array.from(new Set(products.map(p => p.category)));\r\n\r\n  const [selectedColor, setSelectedColor] = useState<string>('all');\r\n  const [selectedSize, setSelectedSize] = useState<string>('all');\r\n\r\n  const allColors = Array.from(new Set(products.flatMap(p => p.availableColors)));\r\n  const allSizes = Array.from(new Set(products.flatMap(p => p.availableSizes)));\r\n\r\n  // Bulk update state\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n  const [selectedVariants, setSelectedVariants] = useState<Set<string>>(new Set());\r\n  const [bulkStockValue, setBulkStockValue] = useState<number>(0);\r\n  const [bulkAction, setBulkAction] = useState<'set' | 'increase' | 'decrease'>('set');\r\n\r\n  const filteredProducts = products.filter(product => {\r\n    const matchesSearch = product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                         product.id.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;\r\n    const matchesColor = selectedColor === 'all' || product.availableColors.includes(selectedColor);\r\n    const matchesSize = selectedSize === 'all' || product.availableSizes.includes(selectedSize);\r\n    \r\n    // Stock status filter - check if any variant matches the selected status\r\n    let matchesStockStatus = true;\r\n    if (selectedStockStatus !== 'all') {\r\n      const hasMatchingVariant = product.variants.some(variant => {\r\n        if (selectedStockStatus === 'out-of-stock') return variant.stock === 0;\r\n        if (selectedStockStatus === 'low-stock') return variant.stock < 10 && variant.stock > 0;\r\n        if (selectedStockStatus === 'in-stock') return variant.stock >= 10;\r\n        return true;\r\n      });\r\n      matchesStockStatus = hasMatchingVariant;\r\n    }\r\n    \r\n    return matchesSearch && matchesCategory && matchesColor && matchesSize && matchesStockStatus;\r\n  });\r\n\r\n  const getStockStatus = (stock: number) => {\r\n    if (stock === 0) return { label: 'Out of Stock', variant: 'destructive' as const, icon: AlertTriangle };\r\n    if (stock < 10) return { label: 'Low Stock', variant: 'secondary' as const, icon: AlertTriangle };\r\n    return { label: 'In Stock', variant: 'default' as const, icon: CheckCircle };\r\n  };\r\n\r\n  const handleEditStock = (productId: string, variantId: string, currentStock: number) => {\r\n    setEditingVariant({ productId, variantId, stock: currentStock });\r\n  };\r\n\r\n  const handleSaveStock = () => {\r\n    if (editingVariant) {\r\n      updateVariantStock(editingVariant.productId, editingVariant.variantId, editingVariant.stock);\r\n      toast.success('Stock updated successfully');\r\n      setEditingVariant(null);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingVariant(null);\r\n  };\r\n\r\n  // Bulk update handlers\r\n  const handleToggleVariant = (productId: string, variantId: string) => {\r\n    const key = `${productId}-${variantId}`;\r\n    setSelectedVariants(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(key)) {\r\n        newSet.delete(key);\r\n      } else {\r\n        newSet.add(key);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    const allVariantKeys = new Set<string>();\r\n    filteredProducts.forEach(product => {\r\n      product.variants\r\n        .filter(variant => selectedColor === 'all' || variant.color === selectedColor)\r\n        .filter(variant => selectedSize === 'all' || variant.size === selectedSize)\r\n        .forEach(variant => {\r\n          allVariantKeys.add(`${product.id}-${variant.id}`);\r\n        });\r\n    });\r\n    setSelectedVariants(allVariantKeys);\r\n  };\r\n\r\n  const handleDeselectAll = () => {\r\n    setSelectedVariants(new Set());\r\n  };\r\n\r\n  const handleBulkUpdate = () => {\r\n    if (selectedVariants.size === 0) {\r\n      toast.error('Please select at least one variant');\r\n      return;\r\n    }\r\n\r\n    const updates: { productId: string; variantId: string; stock: number }[] = [];\r\n    \r\n    selectedVariants.forEach(key => {\r\n      const [productId, variantId] = key.split('-');\r\n      const product = products.find(p => p.id === productId);\r\n      const variant = product?.variants.find(v => v.id === variantId);\r\n      \r\n      if (variant) {\r\n        let newStock = variant.stock;\r\n        \r\n        switch (bulkAction) {\r\n          case 'set':\r\n            newStock = bulkStockValue;\r\n            break;\r\n          case 'increase':\r\n            newStock = variant.stock + bulkStockValue;\r\n            break;\r\n          case 'decrease':\r\n            newStock = Math.max(0, variant.stock - bulkStockValue);\r\n            break;\r\n        }\r\n        \r\n        updates.push({ productId, variantId, stock: newStock });\r\n      }\r\n    });\r\n\r\n    bulkUpdateVariantStock(updates);\r\n    toast.success(`Updated ${updates.length} variant${updates.length > 1 ? 's' : ''} successfully`);\r\n    setSelectedVariants(new Set());\r\n    setBulkMode(false);\r\n  };\r\n\r\n  const totalInventoryValue = products.reduce((sum, product) => \r\n    sum + (product.totalStock * product.price), 0\r\n  );\r\n\r\n  const totalItems = products.reduce((sum, product) => sum + product.totalStock, 0);\r\n  const lowStockItems = products.reduce((sum, product) => \r\n    sum + product.variants.filter(v => v.stock < 10 && v.stock > 0).length, 0\r\n  );\r\n  const outOfStockItems = products.reduce((sum, product) => \r\n    sum + product.variants.filter(v => v.stock === 0).length, 0\r\n  );\r\n\r\n  // Get low stock items grouped by color\r\n  const getLowStockByColor = () => {\r\n    const lowStockByColor: { [color: string]: { productName: string; size: string; stock: number }[] } = {};\r\n    \r\n    products.forEach(product => {\r\n      product.variants.forEach(variant => {\r\n        if (variant.stock < 10 && variant.stock > 0) {\r\n          if (!lowStockByColor[variant.color]) {\r\n            lowStockByColor[variant.color] = [];\r\n          }\r\n          lowStockByColor[variant.color].push({\r\n            productName: product.name,\r\n            size: variant.size,\r\n            stock: variant.stock\r\n          });\r\n        }\r\n      });\r\n    });\r\n    \r\n    return lowStockByColor;\r\n  };\r\n\r\n  const lowStockByColor = getLowStockByColor();\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6\">\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"pb-2 md:pb-3\">\r\n            <CardTitle className=\"text-xs md:text-sm truncate\">Total Inventory Value</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-lg md:text-2xl font-bold\">${totalInventoryValue.toFixed(2)}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">{totalItems} total items</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2 md:pb-3\">\r\n            <CardTitle className=\"text-xs md:text-sm\">Products</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-lg md:text-2xl font-bold\">{products.length}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">Active products</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2 md:pb-3\">\r\n            <CardTitle className=\"text-xs md:text-sm truncate\">Low Stock Alert</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-lg md:text-2xl font-bold text-orange-600\">{lowStockItems}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">Variants below 10 units</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2 md:pb-3\">\r\n            <CardTitle className=\"text-xs md:text-sm truncate\">Out of Stock</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-lg md:text-2xl font-bold text-destructive\">{outOfStockItems}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">Variants to restock</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n            <Package className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n            Inventory Details\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3 md:space-y-4\">\r\n          <div className=\"space-y-3 md:space-y-4\">\r\n            <div className=\"flex flex-col sm:flex-row gap-2 md:gap-4\">\r\n              <div className=\"flex-1 relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Search by product name or ID...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n              <Select value={selectedCategory} onValueChange={setSelectedCategory}>\r\n                <SelectTrigger className=\"w-full sm:w-[180px]\">\r\n                  <SelectValue placeholder=\"All Categories\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Categories</SelectItem>\r\n                  {categories.map(cat => (\r\n                    <SelectItem key={cat} value={cat}>{cat}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div className=\"flex flex-col sm:flex-row gap-2 md:gap-4\">\r\n              <Select value={selectedColor} onValueChange={setSelectedColor}>\r\n                <SelectTrigger className=\"w-full sm:w-[130px]\">\r\n                  <SelectValue placeholder=\"All Colors\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Colors</SelectItem>\r\n                  {allColors.map(color => (\r\n                    <SelectItem key={color} value={color}>{color}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n              <Select value={selectedSize} onValueChange={setSelectedSize}>\r\n                <SelectTrigger className=\"w-[130px]\">\r\n                  <SelectValue placeholder=\"All Sizes\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Sizes</SelectItem>\r\n                  {allSizes.map(size => (\r\n                    <SelectItem key={size} value={size}>{size}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n              <Select value={selectedStockStatus} onValueChange={setSelectedStockStatus}>\r\n                <SelectTrigger className=\"w-full sm:w-[180px]\">\r\n                  <SelectValue placeholder=\"Stock Status\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Stock Levels</SelectItem>\r\n                  <SelectItem value=\"out-of-stock\">Out of Stock</SelectItem>\r\n                  <SelectItem value=\"low-stock\">{\"Low Stock (< 10)\"}</SelectItem>\r\n                  <SelectItem value=\"in-stock\">In Stock</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Bulk Update Controls */}\r\n            <div className=\"flex items-center gap-4\">\r\n              <Button\r\n                variant={bulkMode ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => {\r\n                  setBulkMode(!bulkMode);\r\n                  if (bulkMode) {\r\n                    setSelectedVariants(new Set());\r\n                  }\r\n                }}\r\n                className=\"gap-2\"\r\n              >\r\n                <Layers className=\"w-4 h-4\" />\r\n                {bulkMode ? 'Exit Bulk Mode' : 'Bulk Update'}\r\n              </Button>\r\n\r\n              {bulkMode && (\r\n                <>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleSelectAll}\r\n                  >\r\n                    Select All\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleDeselectAll}\r\n                  >\r\n                    Deselect All\r\n                  </Button>\r\n                  <div className=\"flex items-center gap-2 ml-auto\">\r\n                    <Select value={bulkAction} onValueChange={(v: 'set' | 'increase' | 'decrease') => setBulkAction(v)}>\r\n                      <SelectTrigger className=\"w-[140px]\">\r\n                        <SelectValue />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"set\">Set to</SelectItem>\r\n                        <SelectItem value=\"increase\">Increase by</SelectItem>\r\n                        <SelectItem value=\"decrease\">Decrease by</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={bulkStockValue}\r\n                      onChange={(e) => setBulkStockValue(parseInt(e.target.value) || 0)}\r\n                      className=\"w-24\"\r\n                      placeholder=\"0\"\r\n                    />\r\n                    <Button\r\n                      onClick={handleBulkUpdate}\r\n                      disabled={selectedVariants.size === 0}\r\n                      size=\"sm\"\r\n                    >\r\n                      Apply ({selectedVariants.size})\r\n                    </Button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Low Stock Alert by Color */}\r\n          {Object.keys(lowStockByColor).length > 0 && (\r\n            <div className=\"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-900 rounded-lg p-4\">\r\n              <div className=\"flex items-start gap-2\">\r\n                <AlertTriangle className=\"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"flex-1\">\r\n                  <h4 className=\"font-medium text-orange-900 dark:text-orange-100 mb-2\">\r\n                    Low Stock Alert by Color\r\n                  </h4>\r\n                  <div className=\"space-y-2\">\r\n                    {Object.entries(lowStockByColor).map(([color, items]) => (\r\n                      <div key={color} className=\"space-y-1\">\r\n                        <div className=\"font-medium text-orange-800 dark:text-orange-200\">\r\n                          {color}:\r\n                        </div>\r\n                        <div className=\"ml-4 space-y-1\">\r\n                          {items.map((item, idx) => (\r\n                            <div key={idx} className=\"text-sm text-orange-700 dark:text-orange-300\">\r\n                              • {item.productName} ({item.size}) - {item.stock} units remaining\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Inventory Table */}\r\n          <div className=\"border rounded-lg\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  {bulkMode && <TableHead className=\"w-12\"></TableHead>}\r\n                  <TableHead>Product</TableHead>\r\n                  <TableHead>Category</TableHead>\r\n                  <TableHead>Color</TableHead>\r\n                  <TableHead>Size</TableHead>\r\n                  <TableHead>SKU</TableHead>\r\n                  <TableHead className=\"text-right\">Stock</TableHead>\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead className=\"text-right\">Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredProducts.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={bulkMode ? 9 : 8} className=\"text-center text-muted-foreground py-8\">\r\n                      No products found\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  filteredProducts.flatMap((product) =>\r\n                    product.variants\r\n                      // Filter variants by selected color and size\r\n                      .filter(variant => selectedColor === 'all' || variant.color === selectedColor)\r\n                      .filter(variant => selectedSize === 'all' || variant.size === selectedSize)\r\n                      // Filter variants by stock status\r\n                      .filter(variant => {\r\n                        if (selectedStockStatus === 'all') return true;\r\n                        if (selectedStockStatus === 'out-of-stock') return variant.stock === 0;\r\n                        if (selectedStockStatus === 'low-stock') return variant.stock < 10 && variant.stock > 0;\r\n                        if (selectedStockStatus === 'in-stock') return variant.stock >= 10;\r\n                        return true;\r\n                      })\r\n                      .map((variant) => {\r\n                        const status = getStockStatus(variant.stock);\r\n                        const StatusIcon = status.icon;\r\n                        const isEditing = editingVariant?.productId === product.id && \r\n                                         editingVariant?.variantId === variant.id;\r\n                        const variantKey = `${product.id}-${variant.id}`;\r\n                        const isSelected = selectedVariants.has(variantKey);\r\n\r\n                        return (\r\n                          <TableRow key={variantKey}>\r\n                          {bulkMode && (\r\n                            <TableCell>\r\n                              <Checkbox\r\n                                checked={isSelected}\r\n                                onCheckedChange={() => handleToggleVariant(product.id, variant.id)}\r\n                              />\r\n                            </TableCell>\r\n                          )}\r\n                          <TableCell className=\"font-medium\">{product.name}</TableCell>\r\n                          <TableCell>\r\n                            <Badge variant=\"outline\">{product.category}</Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant=\"secondary\">{variant.color}</Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant=\"outline\">{variant.size}</Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground\">\r\n                            {variant.sku || '-'}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {isEditing ? (\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={editingVariant.stock}\r\n                                onChange={(e) => setEditingVariant({\r\n                                  ...editingVariant,\r\n                                  stock: parseInt(e.target.value) || 0\r\n                                })}\r\n                                className=\"w-20 text-right\"\r\n                                autoFocus\r\n                              />\r\n                            ) : (\r\n                              <span className=\"font-medium\">{variant.stock}</span>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant={status.variant} className=\"gap-1\">\r\n                              <StatusIcon className=\"w-3 h-3\" />\r\n                              {status.label}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {!bulkMode && (\r\n                              <>\r\n                                {isEditing ? (\r\n                                  <div className=\"flex justify-end gap-2\">\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"ghost\"\r\n                                      onClick={handleSaveStock}\r\n                                    >\r\n                                      <Save className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"ghost\"\r\n                                      onClick={handleCancelEdit}\r\n                                    >\r\n                                      <X className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                  </div>\r\n                                ) : (\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"ghost\"\r\n                                    onClick={() => handleEditStock(product.id, variant.id, variant.stock)}\r\n                                  >\r\n                                    <Edit2 className=\"w-4 h-4\" />\r\n                                  </Button>\r\n                                )}\r\n                              </>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      );\r\n                    })\r\n                  )\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}